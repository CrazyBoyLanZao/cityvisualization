webpackJsonp([1],{"4Eg2":function(t,e){},"8PEy":function(t,e,a){"use strict";(function(t){a("n7tv");const i=a("gUwQ");e.a=class{constructor(){return this.myCharts=i.init(document.getElementById("AQI")),this.data=null,this.option={title:{text:null,left:"center",textStyle:{color:"#000000"}},grid:{},tooltip:{trigger:"axis"},xAxis:{data:null,axisLine:{lineStyle:{color:"#000000"}}},yAxis:{axisLine:{lineStyle:{color:"#000000"}}},dataZoom:[{startValue:"2019-09-01"},{type:"inside"}],visualMap:{top:0,right:0,pieces:[{gt:0,lte:50,color:"#096"},{gt:50,lte:100,color:"#76becc"},{gt:100,lte:150,color:"#ff9933"},{gt:150,lte:200,color:"#cc0033"},{gt:200,lte:300,color:"#aa2116"},{gt:300,color:"#72231a"}],outOfRange:{color:"#ffffff"},textStyle:{color:"#000000"}},series:{name:null,type:"line",data:null,markLine:{silent:!0,lineStyle:{color:"#333"},data:[{yAxis:50},{yAxis:100},{yAxis:150},{yAxis:200},{yAxis:300}]}}},this}async initcityaqi(e="南昌市"){let a=function(t){let e=["南昌市","九江市","景德镇市","萍乡市","新余市","鹰潭市","赣州市","宜春市","上饶市","吉安市","抚州市"];for(let a in e)if(t===e[a]){let t=Number(a)+1;return"city_"+t}}(e);this.data=await t.getJSON("static/json/cityAQI/"+a+".json"),this.option.title.text=e+"AQI走势图",this.option.series.name=e+"- AQI",this.option.series.data=this.data.map(function(t){return t[1]}),this.option.xAxis.data=this.data.map(function(t){return t[0]}),this.myCharts.setOption(this.option),this.myCharts.on("click",t=>{let e=t.seriesName.split("-")[0],a=this.data[t.dataIndex][0].split(" ")[0].replace("/","-");this.suggest.initMode(e,a)})}}}).call(e,a("7t+N"))},Jmt5:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("mT0Q"),s=a("n7tv"),l=a("RIpQ"),o=a("d6x3"),c=a("8PEy");const r=a("gUwQ"),d=a("mtWM");var p=a("w5qk");a("iNHu");const h=a("vwbq");class m{constructor(){return this.date={formatEN:t=>new Date(t.replace(/月/,"/").replace(/日/,"/")),formatCN:t=>[t.getMonth()+1+"月",t.getDate()+"日"].join(""),formatPoint:t=>[t.getDate()],resultformatEN:t=>new Date(t.replace(/年/,"/").replace(/月/,"/").replace(/日/,"/")),resultformatCN:t=>[t.getFullYear()+"年",t.getMonth()+1+"月"].join(""),resultformatPoint:t=>[t.getFullYear()+"."+(t.getMonth()+1)],getDays:t=>{let e=h.min(t,t=>this.date.formatEN(t["日期"]).getTime()),a=h.max(t,t=>this.date.formatEN(t["日期"]).getTime());return{startTime:e,endTime:a,totalTimes:(a-e)/864e5+1}},getresultDay:t=>{let e=h.min(t,t=>this.date.resultformatEN(t["日期"]).getTime()),a=h.max(t,t=>this.date.resultformatEN(t["日期"]).getTime());return{startTime:e,endTime:a,totalTimes:(a-e)/2592e6+1}}},this.utils={parseToInt:function(t){return""===t?0:parseInt(t)}},this}initdarw(){h.csv("static/json/rainsheet/month.csv").then(t=>{let e=h.nest().key(t=>t["类型"]).map(t),a=h.nest().key(t=>t["城市名"]).key(t=>t["日期"]).map(e["$1 "]),i={},n=[],s=[],l=[];i=this.date.getresultDay(t),s=[["2019.9"],["2019.10"],["2019.11"],["2019.12"],["2020.1"],["2020.2"],["2020.3"],["2020.4"]],Object.keys(a).forEach(t=>{let e=[],i=[],s=["2019年9月1日","2019年10月1日","2019年11月1日","2019年12月1日","2020年1月1日","2020年2月1日","2020年3月1日","2020年4月1日"];for(let n=0;n<8;n++){let l=new Date(this.date.resultformatEN(s[n])),o=a[t]["$"+s[n]],c=o?this.utils.parseToInt(o[0].AQI):0,r=o?this.utils.parseToInt(o[0]["排名"])/5:0,d=o?o[0].AQI:0,p=c,h=r,m=d;i.push(c),e.push({day:l,inc:c,inc1:r,inc2:d,change:p,change1:h,change2:m})}"0"!==t.slice(1)&&l.push(t.slice(1)),"0"!==t.slice(1)&&n.push({data:e,city:t.slice(1),max:h.max(i)})});const o=30,c=20,r=180,d=30,p=50*i.totalTimes,g=70*n.length,y=h.scaleBand().domain(s).range([d,p-c]).paddingInner(.1).paddingOuter(.2),u=h.scaleBand().domain(n.map(t=>t.city)).range([o,g-r]).paddingInner(.2);const f=h.scaleBand().domain([2019.9,2019.1,2019.11,2019.12,2020.1,2020.2,2020.3,2020.4]).range([d,p-c+250]).paddingInner(.1).paddingOuter(.2),v=h.scaleLinear().domain([1,h.max(n.map(t=>t.max))]).rangeRound([25,Math.pow(y.bandwidth(),2)]);h.select("#rainsheet").select("*").remove();const x=h.select("#rainsheet").append("svg").attr("width",document.getElementById("rainsheet").clientWidth).attr("height",document.getElementById("rainsheet").clientHeight).attr("viewBox",[0,0,document.getElementById("rainsheet").clientWidth+d+c,document.getElementById("rainsheet").clientHeight+o+r]);x.append("g").attr("transform",`translate(${d},0)`).call(h.axisLeft(u).tickValues(n.map(t=>t.city)).tickSize(0)).call(t=>t.select(".domain").remove()).call(t=>t.selectAll("text").style("font-size","14").style("font-weight","bold")),x.append("g").attr("transform",`translate(0,${o})`).call(h.axisTop(f).tickSize(5)).call(t=>t.selectAll("text").style("font-size","14")),x.append("g").selectAll("g").data(n).join("g").attr("class","prov").each(function(t,e){var a;h.select(this).append("g").selectAll("rect").data(t=>t.data).join("rect").attr("width",y.bandwidth()).attr("height",y.bandwidth()).attr("x",(t,e)=>y(s[e])+40*e).attr("y",u(l[e])).attr("fill","#eee").attr("rx",20).attr("ry",20),h.select(this).append("g").selectAll("rect").data(t=>t.data).join("rect").attr("width",t=>0===t.inc1?0:Math.sqrt(v(t.inc1))).attr("height",t=>0===t.inc1?0:Math.sqrt(v(t.inc1))).attr("x",(t,e)=>y(s[e])+40*e).attr("y",u(l[e])).attr("fill",t=>t.change<=50?"rgb(17,198,11)":t.change>50&&t.change<=100?"rgb(231,203,101)":t.change>100&&t.change<=150?"rgb(238,148,40)":t.change>150&&t.change<=200?"rgb(232,83,57)":t.change>200&&t.change<=300?"rgb(107,46,206)":"rgb(108,33,4)").attr("transform",t=>{let e=Math.sqrt(v(t.inc1)),a=y.bandwidth();return 0===t.inc1?"":`translate(${(a-e)/2},${(a-e)/2})`}).attr("rx",15).attr("ry",15).on("click",t=>{a=t.day.getFullYear()+"年"+(t.day.getMonth()+1)+"月",h.csv("static/json/rainsheet/"+a+".csv").then(t=>{console.log(t);let e=h.nest().key(t=>t["类型"]).map(t),a=h.nest().key(t=>t["城市名"]).key(t=>t["日期"]).map(e.$1);const i=new m;let n={},s=[],l=[],o=[];n=i.date.getDays(t);for(let t=0;t<n.totalTimes;t++){let e=new Date(n.startTime+864e5*t);l.push(i.date.formatPoint(e))}Object.keys(a).forEach(t=>{let e=[],l=[];for(let s=0;s<n.totalTimes;s++){let o=new Date(n.startTime+864e5*s),c=i.date.formatCN(o),r=a[t]["$"+c],d=r?i.utils.parseToInt(r[0].AQI):0,p=r?i.utils.parseToInt(r[0]["排名"])/5:0,h=r?r[0].AQI:0,m=d,g=p,y=h;l.push(d),e.push({day:o,inc:d,inc1:p,inc2:h,change:m,change1:g,change2:y})}"0"!==t.slice(1)&&o.push(t.slice(1)),"0"!==t.slice(1)&&s.push({data:e,city:t.slice(1),max:h.max(l)})});const c={top:40,right:0,bottom:0,left:15},r=n.totalTimes,d=22*r,p=36*s.length,g=h.scaleBand().domain(l).range([c.left,d-c.right]).paddingInner(.1).paddingOuter(.2),y=h.scaleBand().domain(s.map(t=>t.city)).range([c.top,p-c.bottom]).paddingInner(.2),u=h.scaleLinear().domain([1,h.max(s.map(t=>t.max))]).rangeRound([25,Math.pow(g.bandwidth(),2)]);h.select("#rainsheet").select("*").remove();const f=h.select("#rainsheet").append("svg").attr("width",d).attr("height",p).attr("viewBox",[0,0,d+c.left+c.right,p+c.top+c.bottom]);f.append("g").attr("transform",`translate(${c.left},0)`).call(h.axisLeft(y).tickValues(s.map(t=>t.city)).tickSize(0)).call(t=>t.select(".domain").remove()).call(t=>t.selectAll("text").style("font-size","14").style("font-weight","bold")),f.append("g").attr("transform",`translate(0,${c.top})`).call(h.axisTop(g).tickSize(10)).call(t=>t.select(".domain").remove()).call(t=>t.selectAll("text").style("font-size","14"));let v=f.append("g").selectAll("g").data(s).join("g").attr("class","prov");v.each(function(t,e){h.select(this).append("g").selectAll("rect").data(t=>t.data).join("rect").attr("width",g.bandwidth()).attr("height",g.bandwidth()).attr("x",(t,e)=>g(l[e])).attr("y",y(o[e])).attr("fill","#eee").attr("rx",20).attr("ry",20),h.select(this).append("g").selectAll("rect").data(t=>t.data).join("rect").attr("width",t=>0===t.inc1?0:Math.sqrt(u(t.inc1))).attr("height",t=>0===t.inc1?0:Math.sqrt(u(t.inc1))).attr("x",(t,e)=>g(l[e])).attr("y",y(o[e])).attr("fill",t=>t.change<=50?"rgb(17,198,11)":t.change>50&&t.change<=100?"rgb(231,203,101)":t.change>100&&t.change<=150?"rgb(238,148,40)":t.change>150&&t.change<=200?"rgb(232,83,57)":t.change>200&&t.change<=300?"rgb(107,46,206)":"rgb(108,33,4)").attr("transform",t=>{let e=Math.sqrt(u(t.inc)),a=g.bandwidth();return 0===t.inc1?"":`translate(${(a-e)/2},${(a-e)/2})`}).attr("rx",15).attr("ry",15).on("click",()=>{i.initdarw()}),h.select(this).append("g").selectAll("text").data(t=>t.data).join("text").attr("x",(t,e)=>g(l[e])).attr("y",y(o[e])).attr("dx",g.bandwidth()/2).attr("dy",y.bandwidth()).text(t=>t.inc2).attr("text-anchor","middle").style("font-size","10")})})}),h.select(this).append("g").selectAll("text").data(t=>t.data).join("text").attr("x",(t,e)=>y(s[e])+40*e).attr("y",u(l[e])+10).attr("dx",y.bandwidth()/2).attr("dy",u.bandwidth()).text(t=>t.inc2).attr("text-anchor","middle").style("font-size","15")})})}}var g={name:"App",mounted:function(){var t=new n.a,e=new o.a,a=new l.a,i=new s.a,h=new c.a,g=new p.a,y=new class{constructor(){this.groupColors=["#d94e5d","#eac736","#50a3ba","#51e974","#5172e9"],this.option={title:{text:"城市污染物对比关系图",left:"center"},color:this.groupColors,legend:{bottom:0,data:[],itemGap:20,textStyle:{color:"#000000",fontSize:14}},parallelAxis:[],visualMap:{show:!1,left:"620",categories:[],dimension:7,inRange:{color:this.groupColors}},parallel:{left:"3%",right:"10%",bottom:"10%",top:"16%",parallelAxisDefault:{type:"value",name:"AQI指数",nameGap:15,nameTextStyle:{color:"#000000",fontSize:10},axisLine:{lineStyle:{color:"#000000"}},axisTick:{lineStyle:{color:"#000000"}},splitLine:{show:!0},axisLabel:{color:"#000000"}}},series:[]},this.Mycharts=r.init(document.getElementById("moreDimention"))}initdimention(t="上饶市"){if(-1!==this.option.visualMap.categories.indexOf(t))return 0;d.get("static/json/elementAir/"+t+".json").then(e=>{let a=e.data.map(t=>[t.date,Number.parseFloat(t["PM2.5"]),Number.parseFloat(t.PM10),Number.parseFloat(t.CO),Number.parseFloat(t.NO2),Number.parseFloat(t.SO2),Number.parseFloat(t.O3),t["城市名"],Number.parseFloat(t.AQI)]),i=[{name:"date",index:0,text:"日期"},{name:"PM2.5",index:1,text:"PM2.5"},{name:"PM10",index:2,text:"PM10"},{name:"CO",index:3,text:"CO"},{name:"NO2",index:4,text:"NO2"},{name:"SO2",index:5,text:"SO2"},{name:"O3",index:6,text:"O3"},{name:"城市名",index:7,text:"城市名"},{name:"AQI",index:8,text:"AQI"}];this.option.parallelAxis=[{dim:0,name:i[0].text,type:"category",inverse:!0},{dim:1,name:i[1].text},{dim:2,name:i[2].text},{dim:3,name:i[3].text},{dim:4,name:i[4].text},{dim:5,name:i[5].text},{dim:6,name:i[6].text},{dim:8,name:i[8].text}];let n={name:t,type:"parallel",lineStyle:{normal:{width:1,opacity:.5}},data:a};this.option.series.push(n),this.option.legend.data.push(t),this.option.visualMap.categories.push(t),this.Mycharts.setOption(this.option)})}dimentionevent(t){this.Mycharts.on("legendselectchanged",t=>{this.option.legend.data.some((e,a)=>{if(e===t.name)return this.option.visualMap.categories.splice(a,1),this.option.legend.data.splice(a,1),!0}),this.option.series.some((e,a)=>{if(e.name===t.name)return this.option.visualMap.categories.splice(a,1),this.option.series.splice(a,1),!0}),this.Mycharts.setOption(this.option),console.log(t)})}},u=new m;t.initMaps(e,a,h,y,g),i.initMode(),h.initcityaqi(),a.initrainDown(),a.rainEvent(t,i),e.initcloud(),g.initheatmap(),g.heatmapevent(a),u.initdarw(),y.initdimention(),y.dimentionevent(g)},methods:{buttonchange:function(){var t=document.getElementById("map"),e=document.getElementById("map1");""===t.style.display?(t.style.display="none",e.style.display=""):(t.style.display="",e.style.display="none")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticStyle:{"text-align":"center","font-size":"40px","font-family":"'华文仿宋',serif"}},[t._v("城市气象数字沙盘可视化平台")]),t._v(" "),a("div",{staticClass:"container-fluid row",staticStyle:{height:"94.5%",margin:"0"}},[t._m(0),t._v(" "),a("div",{staticClass:"col-md-5",staticStyle:{height:"100%","padding-left":"0"}},[a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"58%","margin-bottom":"1%"},attrs:{id:"map"}}),t._v(" "),a("iframe",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"58%","margin-bottom":"1%",display:"none"},attrs:{id:"map1",src:"static/file/index.html"}}),t._v(" "),t._m(1),t._v(" "),a("button",{staticClass:"btn btn-success",staticStyle:{position:"absolute",left:"2%",top:"55%","background-color":"gray"},on:{click:t.buttonchange}},[t._v("切换\n      ")]),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"38%","margin-top":"1.3%"},attrs:{id:"AQI"}})]),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3",staticStyle:{height:"100%"}},[a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"25%"},attrs:{id:"travelGuide"}},[a("div",{staticClass:"col-md-6",staticStyle:{float:"left","margin-top":"2%",padding:"0"}},[a("div",{staticClass:"col-md-12",staticStyle:{height:"25%",padding:"0"}},[a("div",{staticClass:"col-md-4",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"static/svg/日期.svg"}}),t._v(" "),a("div",{staticStyle:{width:"100%","font-size":"100%","text-align":"center"}},[t._v("时间")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"120%"},attrs:{id:"date"}},[t._v("\n              2019年12月1日\n            ")])]),t._v(" "),a("div",{staticClass:"col-md-12",staticStyle:{height:"25%","margin-top":"6%",padding:"0"}},[a("div",{staticClass:"col-md-4",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"90%","padding-left":"20%"},attrs:{src:"static/svg/气温.svg"}}),t._v(" "),a("div",{staticStyle:{width:"100%","font-size":"100%","text-align":"center"}},[t._v("气温")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"150%"},attrs:{id:"temprature"}},[t._v("12.5℃\n            ")])]),t._v(" "),a("div",{staticClass:"col-md-12",staticStyle:{height:"25%","margin-top":"6%",padding:"0"}},[a("div",{staticClass:"col-md-4",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"static/svg/湿度.svg"}}),t._v(" "),a("div",{staticStyle:{width:"100%","font-size":"100%","text-align":"center"}},[t._v("湿度")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"150%","padding-left":"0"},attrs:{id:"humid"}},[t._v("83")])])]),t._v(" "),a("div",{staticClass:"col-md-6",staticStyle:{float:"left","margin-top":"2%",padding:"0"}},[a("div",{staticClass:"col-md-12",staticStyle:{height:"25%",padding:"0"}},[a("div",{staticClass:"col-md-6",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"static/svg/风速.svg"}}),t._v(" "),a("div",{staticStyle:{width:"70%","font-size":"100%","text-align":"center"}},[t._v("风速")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"150%","padding-left":"0"},attrs:{id:"speed"}},[t._v("12.3")])]),t._v(" "),a("div",{staticClass:"col-md-12",staticStyle:{height:"25%","margin-top":"6%",padding:"0"}},[a("div",{staticClass:"col-md-6",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"static/svg/舒适.svg"}}),t._v(" "),a("div",{staticStyle:{width:"80%","font-size":"100%","text-align":"left","white-space":"nowrap"}},[t._v("人体舒适度")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"150%","padding-left":"0"},attrs:{id:"comfortable"}},[t._v("65.6")])]),t._v(" "),a("div",{staticClass:"col-md-12",staticStyle:{height:"25%","margin-top":"6%",padding:"0"}},[a("div",{staticClass:"col-md-6",staticStyle:{height:"80%",float:"left"}},[a("img",{staticStyle:{height:"100%"},attrs:{src:"static/svg/温湿度.svg"}}),t._v(" "),a("div",{staticStyle:{width:"70%","font-size":"100%","text-align":"center","white-space":"nowrap"}},[t._v("温湿指数")])]),t._v(" "),a("div",{staticClass:"col-md-6 suggest",staticStyle:{"font-size":"100%","padding-left":"0"},attrs:{id:"temperaturehumid"}},[t._v("24.9")])])])]),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"46%"},attrs:{id:"rainDown"}}),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"25%"},attrs:{id:"worldCloud"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"typhoon-legend",staticStyle:{bottom:"41.5%",left:"94%"}},[e("li",[e("img",{attrs:{src:"static/legend.png"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4",staticStyle:{height:"100%","padding-left":"0"}},[a("select",{staticStyle:{position:"absolute",width:"20%","z-index":"100",left:"79%",top:"2%"},attrs:{id:"pid"}},[a("option",{attrs:{value:"PM2.5"}},[t._v("PM2.5")]),t._v(" "),a("option",{attrs:{value:"PM10"}},[t._v("PM10")]),t._v(" "),a("option",{attrs:{value:"SO2"}},[t._v("SO2")]),t._v(" "),a("option",{attrs:{value:"NO2"}},[t._v("NO2")]),t._v(" "),a("option",{attrs:{value:"CO"}},[t._v("CO")]),t._v(" "),a("option",{attrs:{value:"O3"}},[t._v("O3")])]),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"25%","margin-bottom":"1.5%"},attrs:{id:"heatmap"}}),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"32.5%","margin-bottom":"1.5%"},attrs:{id:"moreDimention"}}),t._v(" "),a("div",{staticClass:"col-md-12 whiteMargin",staticStyle:{height:"40%"}},[a("div",{staticStyle:{height:"80%"},attrs:{id:"rainsheet"}}),t._v(" "),a("div",{staticStyle:{height:"10%"}})]),t._v(" "),a("ul",{staticClass:"typhoon-legend",staticStyle:{width:"80%"}},[a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(17,198,11)"}}),t._v("优\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(231,203,101)"}}),t._v("良\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(238,148,40)"}}),t._v("轻度污染\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(232,83,57)"}}),t._v("中度污染\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(107,46,206)"}}),t._v("重度污染\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(108,33,4)"}}),t._v("严重污染\n        ")]),t._v(" "),a("li",{staticStyle:{float:"left","text-align":"right","white-space":"nowrap"}},[a("span",{staticClass:"color-circle",staticStyle:{"background-color":"rgb(255,255,255)"}}),t._v("填充度\n          空气质量数值越大半径越大\n        ")])])])}]};var u=a("VU/8")(g,y,!1,function(t){a("4Eg2")},null,null).exports;a("7t+N"),a("K3J8"),a("Jmt5");i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:u},template:"<App/>"})},RIpQ:function(t,e,a){"use strict";(function(t){var i=a("mtWM"),n=(a.n(i),a("iNHu"));a.n(n);const s=a("gUwQ");e.a=class{constructor(){return this.option={title:{text:"AQI降雨量关系图",left:"35%",align:"right"},grid:{},tooltip:{trigger:"axis",axisPointer:{type:"cross",animation:!1,label:{backgroundColor:"#505765"}}},legend:{data:["AQI","降雨量"],left:10},dataZoom:[{show:!0,realtime:!0,start:65,end:85},{type:"inside",realtime:!0,start:65,end:85}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:null}],yAxis:[{name:"AQI指数",type:"value"},{name:"降雨量(mm)",nameLocation:"start",type:"value",inverse:!0}],series:[{name:"AQI",type:"line",areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:null},{name:"降雨量",type:"line",yAxisIndex:1,areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:null}]},this.Mycharts=s.init(document.getElementById("rainDown")),this}async initrainDown(e="江西省"){let a=await t.getJSON("static/json/rainAQI/"+e+".json"),i=a.map(t=>t.Rain),n=a.map(t=>t.date),s=a.map(t=>t.AQI);this.option.xAxis[0].data=n,this.option.series[0].data=s,this.option.series[1].data=i,this.option.title.text=e+"AQI降雨量关系图",this.Mycharts.setOption(this.option,!0)}async updateRain(e="赣州市"){let a=await t.getJSON("static/json/rainAQI/"+e+".json"),i=a.map(t=>t.Rain),n=a.map(t=>t.date),s=a.map(t=>t.AQI);this.option.xAxis[0].data=n,this.option.series[0].data=s,this.option.series[1].data=i,this.option.title.text=e+"AQI降雨量关系图",this.Mycharts.setOption(this.option,!0)}rainEvent(t,e){this.Mycharts.on("click",t=>{e.initMode(t.name).then(t=>t)}),this.Mycharts.on("dblclick",t=>{console.log(t)}),this.Mycharts.on("datazoom",e=>{let a=this.option.xAxis[0].data;setTimeout(this.fillMaps,800,t,a,e)})}fillMaps(t,e,a){const i=e[Number.parseInt(a.start)],n=e[Number.parseInt(a.end)];t.updatefillMap(i,n)}async updaterainplace(e="庐山"){let a=await t.getJSON("static/json/rainAQI/"+e+".json"),i=await t.getJSON("static/json/confortable/"+e+".json"),n=a.map(t=>t.Rain),s=i.map(t=>t.CIHB),l=a.map(t=>t.date),o=t.extend(!0,{},this.option);o.xAxis.data=l,o.series=[{name:"人体舒适指数",type:"line",yAxisIndex:0,areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:s},{name:"降雨量",type:"line",yAxisIndex:1,areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:n}],o.title.text=e+"降雨量图",o.title.left="40%",o.yAxis=[{name:"人体舒适指数",type:"value"},{name:"降雨量(mm)",nameLocation:"start",type:"value",inverse:!0}],o.legend={data:["人体舒适指数","降雨量"],left:10},this.Mycharts.setOption(o,!0)}async updateelement(e,a){let i=await t.getJSON("static/json/elementAir/"+e+".json"),n=await t.getJSON("static/json/rainAQI/"+e+".json"),s=i.map(t=>t.date),l=i.map(t=>t[a]),o=n.map(t=>t.AQI);console.log(l),console.log(o);let c=t.extend(!0,{},this.option);c.xAxis.data=s,c.series=[{name:a,type:"line",yAxisIndex:0,areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:l},{name:"AQI",type:"line",yAxisIndex:1,areaStyle:{},lineStyle:{width:1},emphasis:{focus:"series"},markArea:{silent:!0,itemStyle:{opacity:.3},data:[]},data:o}],c.title.text=e+a+"指数与AQI指数关系图",c.title.left="40%",c.yAxis=[{name:a,type:"value"},{name:"AQI",nameLocation:"start",type:"value",inverse:!0}],c.legend={data:[a,"AQI"],left:10},this.Mycharts.setOption(c,!0)}}}).call(e,a("7t+N"))},d6x3:function(t,e,a){"use strict";(function(t){var i=a("H/E/"),n=a.n(i),s=a("mtWM"),l=(a.n(s),a("Peab"));a.n(l);async function o(e){let a=await t.getJSON("static/json/wordcloud/"+e+".json");return i=a,Object.keys(i).map(t=>[i[t].name,i[t].rank]);var i}e.a=class{constructor(){return this.wc=new n.a(document.getElementById("worldCloud")),this.option={imageShape:"static/img.png",tooltip:{show:!0,formatter:function(t){return t[0]}},gridSize:1,maxFontSize:30,minFontSize:1,color:"random-light",backgroundColor:"rgba(0,0,0,.0)",list:[]},this}async initcloud(){return this.option.list=await o("江西"),this.wc.setOption(this.option),this.wc}async updateclouds(t){this.option.list=await o(t),this.wc.setOption(this.option)}}}).call(e,a("7t+N"))},mT0Q:function(t,e,a){"use strict";(function(t){var i=a("JP5o"),n=a("87mx"),s=a("p5P+"),l=a("WGeT");const o=a("mtWM");function c(t,e){const a=document.createElement("div");a.className="markContent";const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.height="32px",i.style.padding="0.05em",i.style.background="#28e0e0",i.style.borderRadius="44px";const n=document.createElement("div");n.style.color="#fff",n.style.fontSize="12px",n.innerText=t,i.appendChild(n),a.appendChild(i);const s=document.createElement("div");s.style.display="flex",s.style.justifyContent="center";const l=document.createElement("img");return l.style.width="20px",l.style.height="30px",l.alt="marker",l.src=e.blue,s.appendChild(l),a.appendChild(s),a}function r(t,e,a){let i=0;const n=new Date(t),s=new Date(e);for(let t in a){let e=new Date(a[t].date);n<=e&&e<=s&&(i=d(a[t].Rain,i))}return i}function d(t,e){let a,i,n;try{a=t.toString().split(".")[1].length}catch(t){a=0}try{i=e.toString().split(".")[1].length}catch(t){i=0}return(t*(n=Math.pow(10,Math.max(a,i)))+e*n)/n}e.a=class{constructor(){return this.colors=["#B8E1FF","#7DAAFF","#3D76DD","#0047A5","#001D70"],this.scene=new i.Scene({id:"map",map:new n.a({center:[115.9,27.40013],pitch:30,style:"blank",zoom:3,minZoom:3,maxZoom:10,doubleClickZoom:!1}),logoVisible:!1}),this.data=null,this.MarkerPinImg={green:"https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*JhBbT4LvHpQAAAAAAAAAAAAAARQnAQ",blue:"https://gw.alipayobjects.com/mdn/rms_855bab/afts/img/A*n6cXTb8R7iUAAAAAAAAAAAAAARQnAQ"},this.countryLayer=null,this}async initMaps(e,a,i,n,l){this.data=await t.getJSON("static/json/city.json"),this.scene.on("loaded",()=>{this.countryLayer=new s.a(this.scene,{data:this.data,joinBy:["adcode","code"],adcode:["360000"],depth:2,label:{field:"NAME_CHN",textAllowOverlap:!1},fill:{color:{field:"pop",values:this.colors}},popup:{enable:!0,Html:t=>`<span>${t.NAME_CHN}:</span><span>${t.pop}</span>`}}),this.addMarkers(e,a),this.scene.on("click",function(t){o.get("https://restapi.amap.com/v3/geocode/regeo?output=json&location="+t.lnglat.lng+","+t.lnglat.lat+"&key=3e7a24eb63ccd0362f20ef75c17ab511&radius=1000&extensions=all").then(function(t){a.updateRain(t.data.regeocode.addressComponent.city).then(t=>t),i.initcityaqi(t.data.regeocode.addressComponent.city).then(t=>t)}).catch(function(t){console.log(t)})}),this.scene.on("dblclick",function(t){o.get("https://restapi.amap.com/v3/geocode/regeo?output=json&location="+t.lnglat.lng+","+t.lnglat.lat+"&key=3e7a24eb63ccd0362f20ef75c17ab511&radius=1000&extensions=all").then(function(t){n.initdimention(t.data.regeocode.addressComponent.city),l.initheatmap(t.data.regeocode.addressComponent.city)}).catch(function(t){console.log(t)})})})}addMarkers(t,e){o.get("static/json/Attraction.json").then(a=>{let i=a.data;for(let a=0;a<i.length;a++){const n=c(i[a].name,this.MarkerPinImg),s=new l.b({element:n,extData:i[a].name}).setLnglat({lng:i[a].lng,lat:i[a].lat});this.scene.addMarker(s),s.on("click",a=>{e.updaterainplace(a.data).then(),t.updateclouds(a.data).then()}),s.on("dblclick",t=>{!0===confirm("无设备原因,是否播放演示视频")?window.open("VR11/mp4.html","_self"):window.open("VR11/VR.html","_self")})}})}updatefillMap(e,a){(async function(e,a){let i=await t.getJSON("static/json/rain/上饶市.json"),n=await t.getJSON("static/json/rain/九江市.json"),s=await t.getJSON("static/json/rain/南昌市.json"),l=await t.getJSON("static/json/rain/吉安市.json"),o=await t.getJSON("static/json/rain/宜春市.json"),c=await t.getJSON("static/json/rain/抚州市.json"),d=await t.getJSON("static/json/rain/新余市.json"),p=await t.getJSON("static/json/rain/景德镇市.json"),h=await t.getJSON("static/json/rain/萍乡市.json"),m=await t.getJSON("static/json/rain/赣州市.json"),g=await t.getJSON("static/json/rain/鹰潭市.json"),y=await t.getJSON("static/json/city.json");for(let t in y)y[t].pop=0;return y[0].pop=r(e,a,s),y[1].pop=r(e,a,p),y[2].pop=r(e,a,g),y[3].pop=r(e,a,d),y[4].pop=r(e,a,m),y[5].pop=r(e,a,n),y[6].pop=r(e,a,c),y[7].pop=r(e,a,i),y[8].pop=r(e,a,h),y[9].pop=r(e,a,l),y[10].pop=r(e,a,o),y})(e,a).then(t=>{this.countryLayer=new s.a(this.scene,{data:t,joinBy:["adcode","code"],adcode:["360000"],depth:2,label:{field:"NAME_CHN",textAllowOverlap:!1},fill:{color:{field:"pop",values:this.colors}},popup:{enable:!0,Html:t=>`<span>${t.NAME_CHN}:</span><span>${t.pop}</span>`}})})}}}).call(e,a("7t+N"))},n7tv:function(t,e,a){"use strict";(function(t){function a(t){return t<=14?"很冷，不舒服":t<=16.9?"偏冷，较不舒服":t<=25.4?"感觉舒适":t<=27.5?"有热感，较不舒服":t>27.5?"闷热难受，不舒服":void 0}function i(t){return t<=20?"寒冷":t<=40?"冷":t<=50?"凉爽舒适":t<=70?"舒适":t<=80?"温暖舒适":t<=85?"温暖舒适":t>85?"温暖舒适":void 0}e.a=class{constructor(){}async initMode(e="2019-9-1",n="庐山"){const s=await t.getJSON("static/json/confortable/"+n+".json");let l=document.getElementById("date"),o=document.getElementById("temprature"),c=document.getElementById("humid"),r=document.getElementById("speed"),d=document.getElementById("comfortable"),p=document.getElementById("temperaturehumid");for(let t of s)t["日期"]===e&&(l.innerText=t["日期"],o.innerText=t["温度"]+"℃",c.innerText=t["湿度"]+"%",r.innerText=t["风速"]+"m/s",d.innerText=i(t.CIHB),p.innerText=a(t.THI))}}}).call(e,a("7t+N"))},w5qk:function(t,e,a){"use strict";(function(t){a("zqL6");const i=a("gUwQ");async function n(e,a){return(await t.getJSON("static/json/elementAir/"+e+".json")).map(t=>[i.format.formatTime("yyyy-MM-dd",t.date),Number.parseFloat(t[a])])}e.a=class{constructor(){this.option={title:{top:"5%",left:"10%",text:""},tooltip:{},visualMap:{calculable:!0,type:"piecewise",orient:"horizontal",left:"center",bottom:"5%",inRange:{color:["#f5dfa6","#d40000"]}},calendar:{top:"25%",left:"5%",right:"4%",bottom:"20%",cellSize:["auto",12],range:["2019-09-01","2020-4-13"],itemStyle:{borderWidth:.5},yearLabel:{show:!1}},series:{type:"heatmap",coordinateSystem:"calendar",data:null}},this.Mycharts=i.init(document.getElementById("heatmap"))}initheatmap(t="上饶市",e="SO2"){n(t,e).then(a=>{this.option.series.data=a,this.option.title.text=t+e+"2019年9月1日~2020年4月13日情况分布图",this.Mycharts.setOption(this.option)})}heatmapevent(e){let a=this.option,i=this.Mycharts;t("#pid").change(function(){const s=t("#pid").val();let l=a.title.text.split("市")[0]+"市";n(l,s).then(t=>{let e=t.map(t=>t[1]);a.visualMap.max=Math.max.apply(null,e),a.series.data=t,a.title.text=l+s+"2019年9月1日~2020年4月13日情况分布图",i.setOption(a)}),e.updateelement(l,s).then(t=>t)})}}}).call(e,a("7t+N"))}},["NHnr"]);
//# sourceMappingURL=app.5608650097cc7a12d4c3.js.map